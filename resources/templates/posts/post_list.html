{% extends "posts/index.html" %}

{% block content %}

<div class="col-sm-8 col-sm-offset-2">
{% comment %} <h1> {{ title }}  </h1> {% endcomment %}
{% comment %} <form method="GET" action="">
  <input type='text' name="query" placeholder="Search posts" value="{{ request.GET.query }}"  />
  <input type="submit" value="Search" />
</form> {% endcomment %}
{% comment %} {{object_lis}} {% endcomment %}

<div class="row">
    <div class="col-md-12" style="background:white;padding:20px">
        <h4 class="alert alert-success"> پست های جدید </h1>
    </div>
    {% for obj in object_list  %}
    <div class="col-sm-12" style="background:white;padding:10px">
        <div class="thumbnail">
            {% if obj.image %}
                <img src="{{ obj.image.url }}" class="img-responsive" />
            {% endif %}
            <div class="caption">
            <h3>
                <a href='{{ obj.get_absolute_url }}'> {{ obj.title }} </a>
                <small> {{ obj.publish }} </small>
            </h3>
            {% if obj.user.get_full_name %}
            <p>Author : {{ obj.user.get_full_name }} </p>
            {% endif %}
            <p> {{ obj.content | linebreaks | truncatechars:120 }} </p>
            <p style="text-align:left"><a href='{{ obj.get_absolute_url }}' class="btn btn-primary" role="button">بیشتر </a> </p>
            {% comment %} {{ obj.updated }}<br/>
            {{ obj.id }}<br/> {% endcomment %}
            </div>
        </div>
    </div>
    {% endfor %}

<div class="pagination">
    <span class="step-links">
        {% if object_list.has_previous %}
            {% comment %} <a href="?page=1">&laquo; first</a> {% endcomment %}
            <a href="?{{ page_request_var}}={{ object_list.previous_page_number }}
            {% if request.GET.query %}
            &query={{ request.GET.query }}
            {% endif %}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ object_list.number }} of {{ object_list.paginator.num_pages }}.
        </span>

        {% if object_list.has_next %}
            <a href="?{{ page_request_var}}={{ object_list.next_page_number }}
            {% if request.GET.query %}
            &query={{ request.GET.query }}
            {% endif %}">next</a>
            {% comment %} <a href="?page={{ object.paginator.num_pages }}">last &raquo;</a> {% endcomment %}
        {% endif %}
    </span>
</div>

</div>
</div>
{% endblock %}
